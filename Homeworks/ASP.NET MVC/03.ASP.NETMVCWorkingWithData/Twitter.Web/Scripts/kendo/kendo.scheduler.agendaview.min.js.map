{"version":3,"sources":["kendo.scheduler.agendaview.js"],"names":["f","define","$","rowSpan","tasks","idx","length","result","items","resourceValue","resource","item","valuePrimitive","kendo","getter","dataValueField","flattenTaskGroups","groups","flattenGroup","concat","shift","push","apply","call","window","ui","NS","EVENT_WRAPPER_FORMAT","AgendaView","SchedulerView","extend","init","element","options","fn","this","editable","delete","create","update","title","_eventTemplate","_eventTmpl","eventTemplate","_dateTemplate","template","eventDateTemplate","_groupTemplate","eventGroupTemplate","_timeTemplate","eventTimeTemplate","on","_renderLayout","date","name","_mouseenter","e","currentTarget","addClass","_mouseleave","removeClass","_remove","preventDefault","trigger","uid","closest","attr","nextDate","nextDay","startDate","_startDate","endDate","_endDate","previousDate","previousDay","addDays","createLayout","_layout","table","resources","groupHeaders","columns","text","messages","time","className","event","_isMobilePhoneView","splice","groupedResources","_tasks","events","start","end","eventDurationInDays","task","day","getDate","MS_PER_DAY","clone","head","Date","getFullYear","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","tail","isAllDay","middle","getTime","data","Query","sort","field","dir","groupBy","toArray","_renderTaskGroups","tasksGroups","taskGroupIndex","today","taskIndex","tableRow","headerCells","tableRows","showDelete","destroy","_isMobile","isPhoneView","value","isToday","format","join","eventResources","_startTime","endTime","render","content","find","empty","_createGroupConfiguration","_renderGroups","append","_eventsList","_angularItems","refreshLayout","angular","elements","map","dataItem","parentGroups","parents","parent","dataIndex","tmp","obj","span","configuration","dataSource","view","filter","operator","groupEqFilter","indexOf","dataTextField","slice","selectionByElement","cell","index","hasClass","is","children","select","selection","clearSelection","row","eq","current","move","key","handled","keys","UP","DOWN","moveToEvent","constrainSelection","isInRange","off","selectedDateFormat","selectedShortDateFormat","allDay","jQuery","amd","a1","a2","a3"],"mappings":"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","file":"kendo.scheduler.agendaview.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('kendo.scheduler.agendaview', ['kendo.scheduler.view'], f);\n}(function () {\n    var __meta__ = {\n        id: 'scheduler.agendaview',\n        name: 'Scheduler Agenda View',\n        category: 'web',\n        description: 'The Scheduler Agenda View',\n        depends: ['scheduler.view'],\n        hidden: true\n    };\n    (function ($) {\n        var kendo = window.kendo, ui = kendo.ui, NS = '.kendoAgendaView';\n        var EVENT_WRAPPER_FORMAT = '<div class=\"k-task\" title=\"#:title.replace(/\"/g,\"\\'\")#\" data-#=kendo.ns#uid=\"#=uid#\">' + '# if (resources[0]) {#' + '<span class=\"k-scheduler-mark\" style=\"background-color:#=resources[0].color#\"></span>' + '# } #' + '# if (data.isException()) { #' + '<span class=\"k-icon k-i-exception\"></span>' + '# } else if (data.isRecurring()) {#' + '<span class=\"k-icon k-i-refresh\"></span>' + '# } #' + '{0}' + '#if (showDelete) {#' + '<a href=\"\\\\#\" class=\"k-link k-event-delete\"><span class=\"k-icon k-si-close\"></span></a>' + '#}#' + '</div>';\n        ui.AgendaView = ui.SchedulerView.extend({\n            init: function (element, options) {\n                ui.SchedulerView.fn.init.call(this, element, options);\n                options = this.options;\n                if (options.editable) {\n                    options.editable = $.extend({ 'delete': true }, options.editable, {\n                        create: false,\n                        update: false\n                    });\n                }\n                this.title = options.title;\n                this._eventTemplate = this._eventTmpl(options.eventTemplate, EVENT_WRAPPER_FORMAT);\n                this._dateTemplate = kendo.template(options.eventDateTemplate);\n                this._groupTemplate = kendo.template(options.eventGroupTemplate);\n                this._timeTemplate = kendo.template(options.eventTimeTemplate);\n                this.element.on('mouseenter' + NS, '.k-scheduler-agenda .k-scheduler-content tr', '_mouseenter').on('mouseleave' + NS, '.k-scheduler-agenda .k-scheduler-content tr', '_mouseleave').on('click' + NS, '.k-scheduler-agenda .k-scheduler-content .k-link:has(.k-si-close)', '_remove');\n                this._renderLayout(options.date);\n            },\n            name: 'agenda',\n            _mouseenter: function (e) {\n                $(e.currentTarget).addClass('k-state-hover');\n            },\n            _mouseleave: function (e) {\n                $(e.currentTarget).removeClass('k-state-hover');\n            },\n            _remove: function (e) {\n                e.preventDefault();\n                this.trigger('remove', { uid: $(e.currentTarget).closest('.k-task').attr(kendo.attr('uid')) });\n            },\n            nextDate: function () {\n                return kendo.date.nextDay(this.startDate());\n            },\n            startDate: function () {\n                return this._startDate;\n            },\n            endDate: function () {\n                return this._endDate;\n            },\n            previousDate: function () {\n                return kendo.date.previousDay(this.startDate());\n            },\n            _renderLayout: function (date) {\n                this._startDate = date;\n                this._endDate = kendo.date.addDays(date, 7);\n                this.createLayout(this._layout());\n                this.table.addClass('k-scheduler-agenda');\n            },\n            _layout: function () {\n                var columns = [\n                    {\n                        text: this.options.messages.time,\n                        className: 'k-scheduler-timecolumn'\n                    },\n                    { text: this.options.messages.event }\n                ];\n                if (!this._isMobilePhoneView()) {\n                    columns.splice(0, 0, {\n                        text: this.options.messages.date,\n                        className: 'k-scheduler-datecolumn'\n                    });\n                }\n                var resources = this.groupedResources;\n                if (resources.length) {\n                    var groupHeaders = [];\n                    for (var idx = 0; idx < resources.length; idx++) {\n                        groupHeaders.push({\n                            text: '',\n                            className: 'k-scheduler-groupcolumn'\n                        });\n                    }\n                    columns = groupHeaders.concat(columns);\n                }\n                return { columns: columns };\n            },\n            _tasks: function (events) {\n                var tasks = [];\n                for (var idx = 0; idx < events.length; idx++) {\n                    var event = events[idx];\n                    var start = event.start;\n                    var end = event.end;\n                    var eventDurationInDays = (kendo.date.getDate(end) - kendo.date.getDate(start)) / kendo.date.MS_PER_DAY + 1;\n                    var task = event.clone();\n                    task.startDate = kendo.date.getDate(start);\n                    if (task.startDate >= this.startDate()) {\n                        tasks.push(task);\n                    }\n                    if (eventDurationInDays > 1) {\n                        task.end = kendo.date.nextDay(start);\n                        task.head = true;\n                        for (var day = 1; day < eventDurationInDays; day++) {\n                            start = task.end;\n                            task = event.clone();\n                            task.start = start;\n                            task.startDate = kendo.date.getDate(start);\n                            task.end = kendo.date.nextDay(start);\n                            if (day == eventDurationInDays - 1) {\n                                task.end = new Date(task.start.getFullYear(), task.start.getMonth(), task.start.getDate(), end.getHours(), end.getMinutes(), end.getSeconds(), end.getMilliseconds());\n                                task.tail = true;\n                            } else {\n                                task.isAllDay = true;\n                                task.middle = true;\n                            }\n                            if (kendo.date.getDate(task.end) <= this.endDate() && task.start >= this.startDate() || kendo.date.getDate(task.start).getTime() == this.endDate().getTime()) {\n                                tasks.push(task);\n                            }\n                        }\n                    }\n                }\n                return new kendo.data.Query(tasks).sort([\n                    {\n                        field: 'start',\n                        dir: 'asc'\n                    },\n                    {\n                        field: 'end',\n                        dir: 'asc'\n                    }\n                ]).groupBy({ field: 'startDate' }).toArray();\n            },\n            _renderTaskGroups: function (tasksGroups, groups) {\n                var tableRows = [];\n                var editable = this.options.editable;\n                var showDelete = editable && editable.destroy !== false && !this._isMobile();\n                var isPhoneView = this._isMobilePhoneView();\n                for (var taskGroupIndex = 0; taskGroupIndex < tasksGroups.length; taskGroupIndex++) {\n                    var date = tasksGroups[taskGroupIndex].value;\n                    var tasks = tasksGroups[taskGroupIndex].items;\n                    var today = kendo.date.isToday(date);\n                    for (var taskIndex = 0; taskIndex < tasks.length; taskIndex++) {\n                        var task = tasks[taskIndex];\n                        var tableRow = [];\n                        var headerCells = !isPhoneView ? tableRow : [];\n                        if (taskGroupIndex === 0 && taskIndex === 0 && groups.length) {\n                            for (var idx = 0; idx < groups.length; idx++) {\n                                headerCells.push(kendo.format('<td class=\"k-scheduler-groupcolumn{2}\" rowspan=\"{0}\">{1}</td>', groups[idx].rowSpan, this._groupTemplate({ value: groups[idx].text }), groups[idx].className));\n                            }\n                        }\n                        if (taskIndex === 0) {\n                            if (isPhoneView) {\n                                headerCells.push(kendo.format('<td class=\"k-scheduler-datecolumn\" colspan=\"2\">{0}</td>', this._dateTemplate({ date: date })));\n                                tableRows.push('<tr role=\"row\" aria-selected=\"false\"' + (today ? ' class=\"k-today\">' : '>') + headerCells.join('') + '</tr>');\n                            } else {\n                                tableRow.push(kendo.format('<td class=\"k-scheduler-datecolumn{3}{2}\" rowspan=\"{0}\">{1}</td>', tasks.length, this._dateTemplate({ date: date }), taskGroupIndex == tasksGroups.length - 1 && !groups.length ? ' k-last' : '', !groups.length ? ' k-first' : ''));\n                            }\n                        }\n                        if (task.head) {\n                            task.format = '{0:t}';\n                        } else if (task.tail) {\n                            task.format = '{1:t}';\n                        } else {\n                            task.format = '{0:t}-{1:t}';\n                        }\n                        task.resources = this.eventResources(task);\n                        tableRow.push(kendo.format('<td class=\"k-scheduler-timecolumn\"><div>{0}{1}{2}</div></td><td>{3}</td>', task.tail || task.middle ? '<span class=\"k-icon k-i-arrow-w\"></span>' : '', this._timeTemplate(task.clone({\n                            start: task._startTime || task.start,\n                            end: task.endTime || task.end\n                        })), task.head || task.middle ? '<span class=\"k-icon k-i-arrow-e\"></span>' : '', this._eventTemplate(task.clone({ showDelete: showDelete }))));\n                        tableRows.push('<tr role=\"row\" aria-selected=\"false\"' + (today ? ' class=\"k-today\">' : '>') + tableRow.join('') + '</tr>');\n                    }\n                }\n                return tableRows.join('');\n            },\n            render: function (events) {\n                var table = this.content.find('table').empty();\n                var groups = [];\n                if (events.length > 0) {\n                    var resources = this.groupedResources;\n                    if (resources.length) {\n                        groups = this._createGroupConfiguration(events, resources, null);\n                        this._renderGroups(groups, table, []);\n                    } else {\n                        groups = this._tasks(events);\n                        table.append(this._renderTaskGroups(groups, []));\n                    }\n                }\n                var items = this._eventsList = flattenTaskGroups(groups);\n                this._angularItems(table, items);\n                this.refreshLayout();\n                this.trigger('activate');\n            },\n            _angularItems: function (table, items) {\n                this.angular('compile', function () {\n                    var data = [], elements = items.map(function (item) {\n                            data.push({ dataItem: item });\n                            return table.find('.k-task[' + kendo.attr('uid') + '=' + item.uid + ']');\n                        });\n                    return {\n                        elements: elements,\n                        data: data\n                    };\n                });\n            },\n            _renderGroups: function (groups, table, parentGroups) {\n                for (var idx = 0, length = groups.length; idx < length; idx++) {\n                    var parents = parentGroups.splice(0);\n                    parents.push(groups[idx]);\n                    if (groups[idx].groups) {\n                        this._renderGroups(groups[idx].groups, table, parents);\n                    } else {\n                        table.append(this._renderTaskGroups(groups[idx].items, parents));\n                    }\n                }\n            },\n            _createGroupConfiguration: function (events, resources, parent) {\n                var resource = resources[0];\n                var configuration = [];\n                var data = resource.dataSource.view();\n                var isPhoneView = this._isMobilePhoneView();\n                for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                    var value = resourceValue(resource, data[dataIndex]);\n                    var tmp = new kendo.data.Query(events).filter({\n                        field: resource.field,\n                        operator: ui.SchedulerView.groupEqFilter(value)\n                    }).toArray();\n                    if (tmp.length) {\n                        var tasks = this._tasks(tmp);\n                        var className = parent ? '' : ' k-first';\n                        if (dataIndex === data.length - 1 && (!parent || parent.className.indexOf('k-last') > -1)) {\n                            className += ' k-last';\n                        }\n                        var obj = {\n                            text: kendo.getter(resource.dataTextField)(data[dataIndex]),\n                            value: value,\n                            rowSpan: 0,\n                            className: className\n                        };\n                        if (resources.length > 1) {\n                            obj.groups = this._createGroupConfiguration(tmp, resources.slice(1), obj);\n                            if (parent) {\n                                parent.rowSpan += obj.rowSpan;\n                            }\n                        } else {\n                            obj.items = tasks;\n                            var span = rowSpan(obj.items);\n                            if (isPhoneView) {\n                                span += obj.items.length;\n                            }\n                            obj.rowSpan = span;\n                            if (parent) {\n                                parent.rowSpan += span;\n                            }\n                        }\n                        configuration.push(obj);\n                    }\n                }\n                return configuration;\n            },\n            selectionByElement: function (cell) {\n                var index, event;\n                cell = $(cell);\n                if (cell.hasClass('k-scheduler-datecolumn') || !this._eventsList.length) {\n                    return;\n                }\n                if (cell.is('.k-task')) {\n                    cell = cell.closest('td');\n                }\n                if (this._isMobile()) {\n                    var parent = cell.parent();\n                    index = parent.parent().children().filter(function () {\n                        return $(this).children(':not(.k-scheduler-datecolumn)').length;\n                    }).index(parent);\n                } else {\n                    index = cell.parent().index();\n                }\n                event = this._eventsList[index];\n                return {\n                    index: index,\n                    start: event.start,\n                    end: event.end,\n                    isAllDay: event.isAllDay,\n                    uid: event.uid\n                };\n            },\n            select: function (selection) {\n                this.clearSelection();\n                var row = this.table.find('.k-task').eq(selection.index).closest('tr').addClass('k-state-selected').attr('aria-selected', true)[0];\n                this.current(row);\n            },\n            move: function (selection, key) {\n                var handled = false;\n                var index = selection.index;\n                if (key == kendo.keys.UP) {\n                    index--;\n                    handled = true;\n                } else if (key == kendo.keys.DOWN) {\n                    index++;\n                    handled = true;\n                }\n                if (handled) {\n                    var event = this._eventsList[index];\n                    if (event) {\n                        selection.start = event.start;\n                        selection.end = event.end;\n                        selection.isAllDay = event.isAllDay;\n                        selection.events = [event.uid];\n                        selection.index = index;\n                    }\n                }\n                return handled;\n            },\n            moveToEvent: function () {\n                return false;\n            },\n            constrainSelection: function (selection) {\n                var event = this._eventsList[0];\n                if (event) {\n                    selection.start = event.start;\n                    selection.end = event.end;\n                    selection.isAllDay = event.isAllDay;\n                    selection.events = [event.uid];\n                    selection.index = 0;\n                }\n            },\n            isInRange: function () {\n                return true;\n            },\n            destroy: function () {\n                if (this.element) {\n                    this.element.off(NS);\n                }\n                ui.SchedulerView.fn.destroy.call(this);\n            },\n            options: {\n                title: 'Agenda',\n                name: 'agenda',\n                editable: true,\n                selectedDateFormat: '{0:D}-{1:D}',\n                selectedShortDateFormat: '{0:d} - {1:d}',\n                eventTemplate: '#:title#',\n                eventTimeTemplate: '#if(data.isAllDay) {#' + '#=this.options.messages.allDay#' + '#} else { #' + '#=kendo.format(format, start, end)#' + '# } #',\n                eventDateTemplate: '<strong class=\"k-scheduler-agendaday\">' + '#=kendo.toString(date, \"dd\")#' + '</strong>' + '<em class=\"k-scheduler-agendaweek\">' + '#=kendo.toString(date,\"dddd\")#' + '</em>' + '<span class=\"k-scheduler-agendadate\">' + '#=kendo.toString(date, \"y\")#' + '</span>',\n                eventGroupTemplate: '<strong class=\"k-scheduler-adgendagroup\">' + '#=value#' + '</strong>',\n                messages: {\n                    event: 'Event',\n                    date: 'Date',\n                    time: 'Time',\n                    allDay: 'all day'\n                }\n            }\n        });\n        function rowSpan(tasks) {\n            var result = 0;\n            for (var idx = 0, length = tasks.length; idx < length; idx++) {\n                result += tasks[idx].items.length;\n            }\n            return result;\n        }\n        function resourceValue(resource, item) {\n            if (resource.valuePrimitive) {\n                item = kendo.getter(resource.dataValueField)(item);\n            }\n            return item;\n        }\n        function flattenTaskGroups(groups) {\n            var idx = 0, length = groups.length, item, result = [];\n            for (; idx < length; idx++) {\n                item = groups[idx];\n                if (item.groups) {\n                    item = flattenGroup(item.groups);\n                    result = result.concat(item);\n                } else {\n                    result = result.concat(flattenGroup(item.items));\n                }\n            }\n            return result;\n        }\n        function flattenGroup(groups) {\n            var items = [].concat(groups), item = items.shift(), result = [], push = [].push;\n            while (item) {\n                if (item.groups) {\n                    push.apply(items, item.groups);\n                } else if (item.items) {\n                    push.apply(items, item.items);\n                } else {\n                    push.call(result, item);\n                }\n                item = items.shift();\n            }\n            return result;\n        }\n    }(window.kendo.jQuery));\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}